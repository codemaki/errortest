<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Error Simulation API Tester</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        h1 {
            color: white;
            text-align: center;
            margin-bottom: 30px;
            font-size: 2.5em;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }

        .api-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .api-category {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .category-title {
            font-size: 1.3em;
            font-weight: bold;
            color: #333;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 3px solid #667eea;
        }

        .api-button {
            width: 100%;
            padding: 12px 20px;
            margin-bottom: 10px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.3s ease;
            text-align: left;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .api-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
        }

        .api-button:active {
            transform: translateY(0);
        }

        .api-button.danger {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        }

        .api-button.warning {
            background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
        }

        .api-button.info {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
        }

        .button-icon {
            font-size: 18px;
        }

        .response-container {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }

        .response-title {
            font-size: 1.3em;
            font-weight: bold;
            color: #333;
            margin-bottom: 15px;
        }

        .response-box {
            background: #f8f9fa;
            border-left: 4px solid #667eea;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            max-height: 400px;
            overflow-y: auto;
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        .response-box.success {
            border-left-color: #28a745;
            background: #d4edda;
            color: #155724;
        }

        .response-box.error {
            border-left-color: #dc3545;
            background: #f8d7da;
            color: #721c24;
        }

        .loading {
            display: none;
            text-align: center;
            padding: 20px;
            color: white;
            font-size: 18px;
        }

        .loading.active {
            display: block;
        }

        .spinner {
            border: 4px solid rgba(255,255,255,0.3);
            border-top: 4px solid white;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 10px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .input-group {
            display: flex;
            gap: 10px;
            margin-top: 10px;
            align-items: center;
        }

        .input-group input {
            flex: 1;
            padding: 8px 12px;
            border: 2px solid #e0e0e0;
            border-radius: 6px;
            font-size: 14px;
        }

        .input-group input:focus {
            outline: none;
            border-color: #667eea;
        }

        .badge {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 11px;
            font-weight: bold;
            background: rgba(255,255,255,0.3);
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Error Simulation API Tester</h1>

        <div class="loading" id="loading">
            <div class="spinner"></div>
            <div>API í˜¸ì¶œ ì¤‘...</div>
        </div>

        <div class="response-container">
            <div class="response-title">Response</div>
            <div class="response-box" id="response">
APIë¥¼ í˜¸ì¶œí•˜ë©´ ì—¬ê¸°ì— ê²°ê³¼ê°€ í‘œì‹œë©ë‹ˆë‹¤.
            </div>
        </div>

        <div class="api-grid">
            <!-- ë¡œê·¸ ê´€ë ¨ API -->
            <div class="api-category">
                <div class="category-title">ë¡œê·¸ ìƒì„±</div>
                <button class="api-button" onclick="callApi('/api/error/log/error')">
                    <span>ERROR ë¡œê·¸</span>
                    <span class="button-icon">ğŸ“</span>
                </button>
                <button class="api-button" onclick="callApi('/api/error/log/warn')">
                    <span>WARN ë¡œê·¸</span>
                    <span class="button-icon">âš ï¸</span>
                </button>
                <button class="api-button" onclick="callApi('/api/error/log/exception')">
                    <span>ì˜ˆì™¸ ë¡œê·¸ (ìŠ¤íƒ íŠ¸ë ˆì´ìŠ¤)</span>
                    <span class="button-icon">ğŸ’¥</span>
                </button>
                <button class="api-button warning" onclick="callApiWithParam('/api/error/log/spam', 'count', 'count', 100)">
                    <span>ëŒ€ëŸ‰ ì—ëŸ¬ ë¡œê·¸</span>
                    <span class="button-icon">ğŸ“¢</span>
                </button>
                <div class="input-group">
                    <input type="number" id="spamCount" value="100" placeholder="ë¡œê·¸ ê°œìˆ˜">
                </div>
            </div>

            <!-- ì˜ˆì™¸ ë°œìƒ -->
            <div class="api-category">
                <div class="category-title">ì˜ˆì™¸ ë°œìƒ</div>
                <button class="api-button danger" onclick="callApi('/api/error/exception/npe')">
                    <span>NullPointerException</span>
                    <span class="button-icon">âŒ</span>
                </button>
                <button class="api-button danger" onclick="callApi('/api/error/exception/array')">
                    <span>ArrayIndexOutOfBounds</span>
                    <span class="button-icon">ğŸ“Š</span>
                </button>
                <button class="api-button danger" onclick="callApi('/api/error/exception/number')">
                    <span>NumberFormatException</span>
                    <span class="button-icon">ğŸ”¢</span>
                </button>
                <button class="api-button danger" onclick="callApi('/api/error/exception/custom')">
                    <span>Custom Business Exception</span>
                    <span class="button-icon">ğŸ¢</span>
                </button>
                <button class="api-button danger" onclick="callApi('/api/error/exception/io')">
                    <span>IOException</span>
                    <span class="button-icon">ğŸ“</span>
                </button>
                <button class="api-button warning" onclick="callApi('/api/error/random')">
                    <span>ëœë¤ ì—ëŸ¬</span>
                    <span class="button-icon">ğŸ²</span>
                </button>
            </div>

            <!-- HTTP ìƒíƒœ ì½”ë“œ -->
            <div class="api-category">
                <div class="category-title">HTTP ì—ëŸ¬</div>
                <button class="api-button" onclick="callApi('/api/error/http/400')">
                    <span>400 Bad Request</span>
                    <span class="badge">4xx</span>
                </button>
                <button class="api-button" onclick="callApi('/api/error/http/401')">
                    <span>401 Unauthorized</span>
                    <span class="badge">4xx</span>
                </button>
                <button class="api-button" onclick="callApi('/api/error/http/403')">
                    <span>403 Forbidden</span>
                    <span class="badge">4xx</span>
                </button>
                <button class="api-button" onclick="callApi('/api/error/http/404')">
                    <span>404 Not Found</span>
                    <span class="badge">4xx</span>
                </button>
                <button class="api-button danger" onclick="callApi('/api/error/http/500')">
                    <span>500 Internal Server Error</span>
                    <span class="badge">5xx</span>
                </button>
                <button class="api-button danger" onclick="callApi('/api/error/http/503')">
                    <span>503 Service Unavailable</span>
                    <span class="badge">5xx</span>
                </button>
            </div>

            <!-- ì¹˜ëª…ì  ì—ëŸ¬ -->
            <div class="api-category">
                <div class="category-title">ì¹˜ëª…ì  ì—ëŸ¬ âš ï¸</div>
                <button class="api-button danger" onclick="confirmAndCall('/api/error/fatal/stackoverflow', 'ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì‘ë‹µí•˜ì§€ ì•Šì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.')">
                    <span>StackOverflowError</span>
                    <span class="button-icon">ğŸŒ€</span>
                </button>
                <button class="api-button danger" onclick="confirmAndCall('/api/error/fatal/oom', 'ë©”ëª¨ë¦¬ê°€ ë¶€ì¡±í•´ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.')">
                    <span>OutOfMemoryError</span>
                    <span class="button-icon">ğŸ’¾</span>
                </button>
                <button class="api-button danger" onclick="confirmAndCall('/api/error/fatal/deadlock', 'ë°ë“œë½ì´ ë°œìƒí•©ë‹ˆë‹¤.')">
                    <span>ë°ë“œë½ ë°œìƒ</span>
                    <span class="button-icon">ğŸ”’</span>
                </button>
                <button class="api-button danger" onclick="callApiWithParam('/api/error/fatal/exit', 'code', 'exitCode', 1, 'ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì¢…ë£Œë©ë‹ˆë‹¤!')">
                    <span>System.exit()</span>
                    <span class="button-icon">ğŸšª</span>
                </button>
                <div class="input-group">
                    <input type="number" id="exitCode" value="1" placeholder="Exit Code">
                </div>
            </div>

            <!-- ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ -->
            <div class="api-category">
                <div class="category-title">ì„±ëŠ¥ í…ŒìŠ¤íŠ¸</div>
                <button class="api-button warning" onclick="callApiWithParam('/api/error/timeout/slow', 'seconds', 'slowSeconds', 5)">
                    <span>ëŠë¦° ì‘ë‹µ (Timeout)</span>
                    <span class="button-icon">ğŸŒ</span>
                </button>
                <div class="input-group">
                    <input type="number" id="slowSeconds" value="5" placeholder="ëŒ€ê¸° ì‹œê°„(ì´ˆ)">
                </div>

                <button class="api-button warning" onclick="callApiWithParam('/api/error/load/cpu', 'seconds', 'cpuSeconds', 10)">
                    <span>CPU ê³¼ë¶€í•˜</span>
                    <span class="button-icon">ğŸ”¥</span>
                </button>
                <div class="input-group">
                    <input type="number" id="cpuSeconds" value="10" placeholder="ë¶€í•˜ ì‹œê°„(ì´ˆ)">
                </div>

                <button class="api-button warning" onclick="callApiWithParam('/api/error/leak/memory', 'count', 'leakCount', 1000)">
                    <span>ë©”ëª¨ë¦¬ ëˆ„ìˆ˜</span>
                    <span class="button-icon">ğŸ’§</span>
                </button>
                <div class="input-group">
                    <input type="number" id="leakCount" value="1000" placeholder="ê°ì²´ ê°œìˆ˜">
                </div>
            </div>

            <!-- ìƒíƒœ í™•ì¸ -->
            <div class="api-category">
                <div class="category-title">ìƒíƒœ í™•ì¸</div>
                <button class="api-button info" onclick="callApi('/api/error/status')">
                    <span>ì• í”Œë¦¬ì¼€ì´ì…˜ ìƒíƒœ</span>
                    <span class="button-icon">ğŸ“Š</span>
                </button>
            </div>
        </div>
    </div>

    <script>
        async function callApi(url) {
            const responseBox = document.getElementById('response');
            const loading = document.getElementById('loading');

            loading.classList.add('active');
            responseBox.className = 'response-box';
            responseBox.textContent = 'API í˜¸ì¶œ ì¤‘...';

            const startTime = Date.now();

            try {
                const response = await fetch(url);
                const duration = Date.now() - startTime;

                let responseData;
                const contentType = response.headers.get('content-type');

                if (contentType && contentType.includes('application/json')) {
                    responseData = await response.json();
                } else {
                    responseData = await response.text();
                }

                const result = {
                    status: response.status,
                    statusText: response.statusText,
                    duration: duration + 'ms',
                    timestamp: new Date().toLocaleString('ko-KR'),
                    url: url,
                    data: responseData
                };

                responseBox.textContent = JSON.stringify(result, null, 2);

                if (response.ok) {
                    responseBox.classList.add('success');
                } else {
                    responseBox.classList.add('error');
                }
            } catch (error) {
                const duration = Date.now() - startTime;
                const errorResult = {
                    error: error.message,
                    duration: duration + 'ms',
                    timestamp: new Date().toLocaleString('ko-KR'),
                    url: url,
                    note: 'ì„œë²„ê°€ ì‘ë‹µí•˜ì§€ ì•Šê±°ë‚˜ ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.'
                };

                responseBox.textContent = JSON.stringify(errorResult, null, 2);
                responseBox.classList.add('error');
            } finally {
                loading.classList.remove('active');
            }
        }

        function callApiWithParam(baseUrl, paramName, inputId, defaultValue, confirmMsg = null) {
            if (confirmMsg && !confirm(confirmMsg)) {
                return;
            }

            const inputElement = document.getElementById(inputId);
            const paramValue = inputElement ? inputElement.value : defaultValue;
            const url = `${baseUrl}?${paramName}=${paramValue}`;
            callApi(url);
        }

        function confirmAndCall(url, message) {
            if (confirm(`ê²½ê³ : ${message}\n\nê³„ì†í•˜ì‹œê² ìŠµë‹ˆê¹Œ?`)) {
                callApi(url);
            }
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ìƒíƒœ í™•ì¸
        window.addEventListener('load', () => {
            callApi('/api/error/status');
        });
    </script>
</body>
</html>
